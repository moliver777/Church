<h1>News Articles</h1>
<table>
	<tr>
		<th>Title</th>
		<th>Abstract</th>
		<th>Content</th>
		<th>Image</th>
		<th>Published?</th>
		<th></th>
		<th></th>
		<th></th>
	</tr>
	<% @news_article.each do |news_article| %>
		<tr>
			<td><%= news_article.title %></td>
			<td><%= truncate news_article.abstract %></td>
			<td><%= truncate news_article.text, :length => 50 %></td>
			<td>
				<% if news_article.image %>
					<img class="thumb" src="/image/<%= news_article.image.id %>" />
				<% else %>
					N/A
				<% end %>
			</td>
			<td><%= check_box_tag :news_article_publish, news_article.id, news_article.publish, {:id => "publish#{news_article.id}", :class => "news_article_publish"} %></td>
			<td><%= link_to 'Show', news_article %></td>
			<td><%= link_to 'Edit', edit_news_article_path(news_article) %></td>
			<td><a class="rails-delete" data-link="/news_articles/delete/<%= news_article.id %>">Destroy</a></td>
		</tr>
	<% end %>
</table>
<br />
<%= link_to 'New News Article', new_news_article_path %>

<script type="text/javascript">
	$(document).ready(function() {
		$("input.news_article_publish").unbind("click").click(function() {
			$.post("/news_article/publish", {id: $(this).val(), publish: $(this).is(":checked")});
		});
	});
</script>